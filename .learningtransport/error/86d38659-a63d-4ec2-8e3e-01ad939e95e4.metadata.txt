{
  "NServiceBus.MessageId": "8112aecc-93f8-4a03-9088-b22f0179b584",
  "NServiceBus.MessageIntent": "Send",
  "NServiceBus.ConversationId": "b83325f6-1952-498b-9233-b22f0179b586",
  "NServiceBus.CorrelationId": "8112aecc-93f8-4a03-9088-b22f0179b584",
  "NServiceBus.ReplyToAddress": "NServiceBusHandlers",
  "NServiceBus.OriginatingMachine": "MYLAPTOP",
  "NServiceBus.OriginatingEndpoint": "NServiceBusHandlers",
  "$.diagnostics.originating.hostid": "857810f7bcb54bbf82ffcc6197936f5c",
  "NServiceBus.ContentType": "application\/json",
  "NServiceBus.EnclosedMessageTypes": "BowlingSys.Contracts.BookingDtos.BookingDto, BowlingSys.Contracts, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null",
  "NServiceBus.Version": "9.2.2",
  "NServiceBus.TimeSent": "2024-11-21 22:55:11:965646 Z",
  "traceparent": "00-ff27678927abd48f48ccd9b7990c33e5-4319e591cd12706d-00",
  "NServiceBus.ProcessingMachine": "MYLAPTOP",
  "NServiceBus.OpenTelemetry.StartNewTrace": "True",
  "NServiceBus.Retries.Timestamp": "2024-11-21 22:55:59:306873 Z",
  "NServiceBus.DeliverAt": "2024-11-21 22:55:34:900731 Z",
  "NServiceBus.ProcessingEndpoint": "NServiceBusHandlers",
  "$.diagnostics.hostid": "857810f7bcb54bbf82ffcc6197936f5c",
  "$.diagnostics.hostdisplayname": "MYLAPTOP",
  "NServiceBus.FailedQ": "NServiceBusHandlers",
  "NServiceBus.ExceptionInfo.ExceptionType": "Npgsql.PostgresException",
  "NServiceBus.ExceptionInfo.HelpLink": null,
  "NServiceBus.ExceptionInfo.Message": "42601: subquery must return only one column",
  "NServiceBus.ExceptionInfo.Source": "Npgsql",
  "NServiceBus.ExceptionInfo.StackTrace": "Npgsql.PostgresException (0x80004005): 42601: subquery must return only one column\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at BowlingSys.DBConnect.DBConnect.SelectAndRunStoredProcedure(String storedProcedure, NpgsqlParameter[] parameters) in C:\\Users\\pawel\\Documents\\Pawel.UserDetails.Process\\BowlingSys.DBConnect\\DBConnect\\DBConnect.cs:line 35\r\n   at BowlingSys.DBConnect.DBConnect.SelectAndRunStoredProcedure(String storedProcedure, NpgsqlParameter[] parameters) in C:\\Users\\pawel\\Documents\\Pawel.UserDetails.Process\\BowlingSys.DBConnect\\DBConnect\\DBConnect.cs:line 48\r\n   at BowlingSys.DBConnect.DBConnect.SelectAndRunStoredProcedure(String storedProcedure, NpgsqlParameter[] parameters) in C:\\Users\\pawel\\Documents\\Pawel.UserDetails.Process\\BowlingSys.DBConnect\\DBConnect\\DBConnect.cs:line 48\r\n   at BowlingSys.DBConnect.DBConnect.SelectAndRunStoredProcedure(String storedProcedure, NpgsqlParameter[] parameters) in C:\\Users\\pawel\\Documents\\Pawel.UserDetails.Process\\BowlingSys.DBConnect\\DBConnect\\DBConnect.cs:line 48\r\n   at BowlingSys.Services.BookingService.BookingService.CallGetLaneByBooking_SP(Int32 bookingid) in C:\\Users\\pawel\\Documents\\Pawel.UserDetails.Process\\BowlingSys.DBConnect\\Services\\BookingService.cs:line 30\r\n   at BowlingSys.Handlers.Handlers.MyMessageHandler.Handle(BookingDto message, IMessageHandlerContext context) in C:\\Users\\pawel\\Documents\\Pawel.UserDetails.Process\\BowlingSys.Handlers\\Handlers\\BookingHandler.cs:line 21\r\n   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in \/_\/src\/NServiceBus.Core\/Pipeline\/Incoming\/InvokeHandlerTerminator.cs:line 27\r\n   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in \/_\/src\/NServiceBus.Core\/Pipeline\/Incoming\/LoadHandlersConnector.cs:line 49\r\n   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in \/_\/src\/NServiceBus.Core\/Pipeline\/Incoming\/DeserializeMessageConnector.cs:line 39\r\n   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in \/_\/src\/NServiceBus.Core\/Performance\/Statistics\/ProcessingStatisticsBehavior.cs:line 25\r\n   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in \/_\/src\/NServiceBus.Core\/Pipeline\/Incoming\/TransportReceiveToPhysicalMessageConnector.cs:line 36\r\n   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in \/_\/src\/NServiceBus.Core\/ServicePlatform\/Retries\/RetryAcknowledgementBehavior.cs:line 25\r\n   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in \/_\/src\/NServiceBus.Core\/Pipeline\/MainPipelineExecutor.cs:line 50\r\n   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in \/_\/src\/NServiceBus.Core\/Pipeline\/MainPipelineExecutor.cs:line 78\r\n   at NServiceBus.LearningTransportMessagePump.ProcessFile(ILearningTransportTransaction transaction, String messageId, CancellationToken messageProcessingCancellationToken) in \/_\/src\/NServiceBus.Core\/Transports\/Learning\/LearningTransportMessagePump.cs:line 340\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 42601\r\n    MessageText: subquery must return only one column\r\n    InternalPosition: 11\r\n    InternalQuery: result := (SELECT * FROM dbo.bookings WHERE booking_id = p_bookingid)\r\n    Where: PL\/pgSQL function dbo.getlanebybooking(integer) line 3 at assignment\r\n    File: parse_expr.c\r\n    Line: 1915\r\n    Routine: transformSubLink",
  "NServiceBus.TimeOfFailure": "2024-11-21 22:56:36:375217 Z",
  "NServiceBus.ExceptionInfo.Data.Severity": "ERROR",
  "NServiceBus.ExceptionInfo.Data.InvariantSeverity": "ERROR",
  "NServiceBus.ExceptionInfo.Data.SqlState": "42601",
  "NServiceBus.ExceptionInfo.Data.MessageText": "subquery must return only one column",
  "NServiceBus.ExceptionInfo.Data.InternalPosition": "11",
  "NServiceBus.ExceptionInfo.Data.InternalQuery": "result := (SELECT * FROM dbo.bookings WHERE booking_id = p_bookingid)",
  "NServiceBus.ExceptionInfo.Data.Where": "PL\/pgSQL function dbo.getlanebybooking(integer) line 3 at assignment",
  "NServiceBus.ExceptionInfo.Data.File": "parse_expr.c",
  "NServiceBus.ExceptionInfo.Data.Line": "1915",
  "NServiceBus.ExceptionInfo.Data.Routine": "transformSubLink",
  "NServiceBus.ExceptionInfo.Data.Message type": "BowlingSys.Contracts.BookingDtos.BookingDto",
  "NServiceBus.ExceptionInfo.Data.Handler type": "BowlingSys.Handlers.Handlers.MyMessageHandler",
  "NServiceBus.ExceptionInfo.Data.Handler start time": "2024-11-21 22:56:36:168101 Z",
  "NServiceBus.ExceptionInfo.Data.Handler failure time": "2024-11-21 22:56:36:373089 Z",
  "NServiceBus.ExceptionInfo.Data.Handler canceled": "False",
  "NServiceBus.ExceptionInfo.Data.Message ID": "8112aecc-93f8-4a03-9088-b22f0179b584",
  "NServiceBus.ExceptionInfo.Data.Transport message ID": "1c0b1b1c-2c9b-4077-b429-66a592b95d1d",
  "NServiceBus.ExceptionInfo.Data.Pipeline canceled": "False"
}